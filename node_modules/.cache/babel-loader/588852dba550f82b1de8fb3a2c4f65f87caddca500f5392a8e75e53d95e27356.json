{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      searchText: '',\n      addedBooks: [],\n      dialogDelete: false,\n      deleteIndex: -1,\n      deleteItem: {}\n    };\n  },\n  computed: {\n    filteredBooks() {\n      if (this.searchText !== '') {\n        return this.addedBooks.filter(book => book.bookName.toLowerCase().includes(this.searchText.toLowerCase()) || book.authorName.toLowerCase().includes(this.searchText.toLowerCase()) || book.language.toLowerCase().includes(this.searchText.toLowerCase()) || book.category.toLowerCase().includes(this.searchText.toLowerCase()) || book.rack.toLowerCase().includes(this.searchText.toLowerCase()) || book.quantity.toLowerCase().includes(this.searchText.toLowerCase()));\n      } else {\n        return this.addedBooks;\n      }\n    }\n  },\n  mounted() {\n    this.getbooks();\n  },\n  methods: {\n    deleteB(item) {\n      this.deleteIndex = this.filteredBooks.indexOf(item);\n      this.deleteItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n    },\n    async getbooks() {\n      try {\n        const response = await axios.get(`${this.$store.getters.getUrl}/library/getAllBooks`);\n        if (response.status === 200) {\n          console.log(response.data);\n          this.addedBooks = response.data.map(book => ({\n            ...book,\n            rowHighlighted: false // Initialize rowHighlighted property for each book\n          }));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    editBook(index) {\n      this.addedBooks[index].editable = true;\n      this.addedBooks[index].rowHighlighted = true; // Highlight the row\n    },\n    async submitEdit(index) {\n      try {\n        const book = this.addedBooks[index];\n        const response = await axios.put(`${this.$store.getters.getUrl}/library/update`, {\n          \"id\": book.id,\n          \"bookName\": book.bookName,\n          \"authorName\": book.authorName,\n          \"language\": book.language,\n          \"category\": book.category,\n          \"rack\": book.rack,\n          \"quantity\": book.quantity\n        });\n        if (response.status === 200) {\n          alert('successfully updated');\n          this.addedBooks[index].editable = false;\n          this.addedBooks[index].rowHighlighted = false; // Remove row highlight after edit\n          this.getbooks();\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async deleteBook() {\n      try {\n        const bookid = this.deleteItem.id;\n        const response = await axios.delete(`${this.$store.getters.getUrl}/library/deleteId/${bookid}`);\n        if (response.status === 200) {\n          this.dialogDelete = false;\n          // alert('successfully deleted')\n          this.getbooks();\n        }\n      } catch (error) {\n        alert(error);\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","searchText","addedBooks","dialogDelete","deleteIndex","deleteItem","computed","filteredBooks","filter","book","bookName","toLowerCase","includes","authorName","language","category","rack","quantity","mounted","getbooks","methods","deleteB","item","indexOf","Object","assign","closeDelete","response","get","$store","getters","getUrl","status","console","log","map","rowHighlighted","error","editBook","index","editable","submitEdit","put","id","alert","deleteBook","bookid","delete"],"sources":["C:\\Users\\LENOVO\\Documents\\practice\\siya\\newlibrary-main\\newlibrary-main\\src\\components\\ManageBook.vue"],"sourcesContent":["<template>\r\n  <v-main>\r\n    <v-container class=\"py-8 px-6\" fluid>\r\n  <h1 class=\"text-center mt-5\">Manage Books</h1>\r\n  <div class=\"search ms-3\">\r\n    <div class=\"search-bar\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-search icon\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0\"/>\r\n      </svg>\r\n      <input v-model=\"searchText\" type=\"text\" placeholder=\"Search\" @input=\"search\" />\r\n    </div>\r\n    <div style=\"margin-top: 30px;\"></div>\r\n  </div>\r\n  <div style=\"margin-left: 15px; margin-right: 20px;\">\r\n    <v-table class=\"table\" height=\"300px\" fixed-header>\r\n      <thead>\r\n        <tr class=\"bg-dark\">\r\n          <th>BookId</th>\r\n          <th>Book Name</th>\r\n          <th>Author</th>\r\n          <th>Language</th>\r\n          <th>Category</th>\r\n          <th>Rack</th>\r\n          <th>Quantity</th>\r\n          <th>Edit</th>\r\n          <th>Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(book, index) in filteredBooks\" :key=\"index\" :class=\"{ 'highlighted-row': book.rowHighlighted }\">\r\n          <td><input type=\"text\" v-model=\"book.id\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.bookName\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.authorName\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.language\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.category\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.rack\" :disabled=\"!book.editable\" /></td>\r\n          <td><input type=\"text\" v-model=\"book.quantity\" :disabled=\"!book.editable\" /></td>\r\n          <td>\r\n            <button v-if=\"!book.editable\" @click=\"editBook(index)\"><v-icon>mdi-pencil</v-icon></button>\r\n            <button v-else @click=\"submitEdit(index)\">Submit</button>\r\n          </td>\r\n          <td><button @click=\"deleteB(book)\"><v-icon style=\"color: red;\">mdi-delete</v-icon></button>\r\n            <v-dialog v-model=\"dialogDelete\" width=\"400px\">\r\n                        <v-card class=\" pb-4\" style=\"border-top:25px solid #FFCDD2\">\r\n                            <v-icon color=\"red-accent-4\" size=\"54\"\r\n                                class=\"align-self-center mt-2\">mdi-alert-outline</v-icon>\r\n                            <v-card-title class=\"mb-2 text-center fs-4\">Delete\r\n                                Book?</v-card-title>\r\n                            <v-card-text class=\"text-center\">Are you sure you want to delete \r\n                                {{ deleteItem.bookName }}?</v-card-text>\r\n                            <v-card-actions class=\"d-flex justify-content-center \">\r\n\r\n                                <v-btn color=\"#B71C1C\" variant=\"tonal\" @click=\"deleteBook()\">Delete</v-btn>\r\n                                <v-btn color=\"#424242\" variant=\"tonal\" @click=\"closeDelete\">Cancel</v-btn>\r\n                            </v-card-actions>\r\n                        </v-card>\r\n                    </v-dialog> \r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </v-table>\r\n  </div>\r\n  </v-container>\r\n  </v-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchText: '',\r\n      addedBooks: [],\r\n      dialogDelete: false,\r\n      deleteIndex: -1,\r\n      deleteItem: {},\r\n    };\r\n  },\r\n  computed: {\r\n    filteredBooks() {\r\n      if (this.searchText !== '') {\r\n        return this.addedBooks.filter(book =>\r\n          book.bookName.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          book.authorName.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          book.language.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          book.category.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          book.rack.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          book.quantity.toLowerCase().includes(this.searchText.toLowerCase())\r\n        );\r\n      } else {\r\n        return this.addedBooks;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getbooks();\r\n  },\r\n  methods: {\r\n    deleteB(item) {\r\n      this.deleteIndex = this.filteredBooks.indexOf(item);\r\n      this.deleteItem = Object.assign({},item);\r\n      this.dialogDelete = true;\r\n    },\r\n    closeDelete(){\r\n      this.dialogDelete = false;\r\n    },\r\n    async getbooks() {\r\n      try {\r\n        const response = await axios.get(`${this.$store.getters.getUrl}/library/getAllBooks`);\r\n        if (response.status === 200) {\r\n          console.log(response.data);\r\n          this.addedBooks = response.data.map(book => ({\r\n            ...book,\r\n            rowHighlighted: false // Initialize rowHighlighted property for each book\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    editBook(index) {\r\n      this.addedBooks[index].editable = true;\r\n      this.addedBooks[index].rowHighlighted = true; // Highlight the row\r\n    },\r\n    async submitEdit(index) {\r\n      try {\r\n        const book = this.addedBooks[index];\r\n        const response = await axios.put(`${this.$store.getters.getUrl}/library/update`, {\r\n          \"id\": book.id,\r\n          \"bookName\": book.bookName,\r\n          \"authorName\": book.authorName,\r\n          \"language\": book.language,\r\n          \"category\": book.category,\r\n          \"rack\": book.rack,\r\n          \"quantity\": book.quantity\r\n        });\r\n        if (response.status === 200) {\r\n          alert('successfully updated')\r\n          this.addedBooks[index].editable = false;\r\n          this.addedBooks[index].rowHighlighted = false; // Remove row highlight after edit\r\n          this.getbooks();\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async deleteBook() {\r\n      try {\r\n        const bookid = this.deleteItem.id\r\n        const response = await axios.delete(`${this.$store.getters.getUrl}/library/deleteId/${bookid}`)\r\n        if (response.status === 200) {\r\n          this.dialogDelete = false;\r\n          // alert('successfully deleted')\r\n          this.getbooks()\r\n        }\r\n      } catch (error) {\r\n        alert(error)\r\n        console.error(error)\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.search-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 250px;\r\n  border: none; /* Remove the border */\r\n  border-bottom: 1px solid black; /* Add bottom border */\r\n}\r\n\r\n.search-bar input[type=\"text\"] {\r\n  border: none; /* Remove border */\r\n  outline: none; /* Remove outline */\r\n  width: calc(100% - 30px); /* Full width minus space for icon */\r\n  padding: 4px; /* Add padding */\r\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n}\r\n\r\n.search-bar i {\r\n  margin-left: 5px; /* Adjust icon spacing */\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\n.table th,\r\n.table td {\r\n  border: 1px solid #ddd; /* Border style and color */\r\n  padding: 8px;\r\n}\r\n\r\n.table th {\r\n  background-color: #f2f2f2;\r\n}\r\n\r\ntable input[type=\"text\"] {\r\n  border: none; /* Remove the border */\r\n  outline: none; /* Remove the outline box */\r\n  width: 100%; /* Expand the input field to fill the available space */\r\n  padding: 4px; /* Add some padding to the input field */\r\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n}\r\n\r\n.v-table.v-table--fixed-header > .v-table__wrapper > table > thead > tr > th {\r\n  background: #646c4c;\r\n  color: white;\r\n}\r\n\r\n.highlighted-row {\r\n  background-color: rgba(0, 0, 0, 0.1); /* Change background color for highlighted row */\r\n}\r\n</style>\r\n"],"mappings":"AAmEA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE,EAAE;MACdC,YAAY,EAAE,KAAK;MACnBC,WAAW,EAAE,CAAC,CAAC;MACfC,UAAU,EAAE,CAAC;IACf,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,aAAaA,CAAA,EAAG;MACd,IAAI,IAAI,CAACN,UAAS,KAAM,EAAE,EAAE;QAC1B,OAAO,IAAI,CAACC,UAAU,CAACM,MAAM,CAACC,IAAG,IAC/BA,IAAI,CAACC,QAAQ,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,KAClEF,IAAI,CAACI,UAAU,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,KACpEF,IAAI,CAACK,QAAQ,CAACH,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,KAClEF,IAAI,CAACM,QAAQ,CAACJ,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,KAClEF,IAAI,CAACO,IAAI,CAACL,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,KAC9DF,IAAI,CAACQ,QAAQ,CAACN,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACX,UAAU,CAACU,WAAW,CAAC,CAAC,CACpE,CAAC;MACH,OAAO;QACL,OAAO,IAAI,CAACT,UAAU;MACxB;IACF;EACF,CAAC;EACDgB,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,QAAQ,CAAC,CAAC;EACjB,CAAC;EACDC,OAAO,EAAE;IACPC,OAAOA,CAACC,IAAI,EAAE;MACZ,IAAI,CAAClB,WAAU,GAAI,IAAI,CAACG,aAAa,CAACgB,OAAO,CAACD,IAAI,CAAC;MACnD,IAAI,CAACjB,UAAS,GAAImB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAACH,IAAI,CAAC;MACxC,IAAI,CAACnB,YAAW,GAAI,IAAI;IAC1B,CAAC;IACDuB,WAAWA,CAAA,EAAE;MACX,IAAI,CAACvB,YAAW,GAAI,KAAK;IAC3B,CAAC;IACD,MAAMgB,QAAQA,CAAA,EAAG;MACf,IAAI;QACF,MAAMQ,QAAO,GAAI,MAAM5B,KAAK,CAAC6B,GAAG,CAAE,GAAE,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,MAAO,sBAAqB,CAAC;QACrF,IAAIJ,QAAQ,CAACK,MAAK,KAAM,GAAG,EAAE;UAC3BC,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC3B,IAAI,CAAC;UAC1B,IAAI,CAACE,UAAS,GAAIyB,QAAQ,CAAC3B,IAAI,CAACmC,GAAG,CAAC1B,IAAG,KAAM;YAC3C,GAAGA,IAAI;YACP2B,cAAc,EAAE,KAAI,CAAE;UACxB,CAAC,CAAC,CAAC;QACL;MACF,EAAE,OAAOC,KAAK,EAAE;QACdJ,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACDC,QAAQA,CAACC,KAAK,EAAE;MACd,IAAI,CAACrC,UAAU,CAACqC,KAAK,CAAC,CAACC,QAAO,GAAI,IAAI;MACtC,IAAI,CAACtC,UAAU,CAACqC,KAAK,CAAC,CAACH,cAAa,GAAI,IAAI,EAAE;IAChD,CAAC;IACD,MAAMK,UAAUA,CAACF,KAAK,EAAE;MACtB,IAAI;QACF,MAAM9B,IAAG,GAAI,IAAI,CAACP,UAAU,CAACqC,KAAK,CAAC;QACnC,MAAMZ,QAAO,GAAI,MAAM5B,KAAK,CAAC2C,GAAG,CAAE,GAAE,IAAI,CAACb,MAAM,CAACC,OAAO,CAACC,MAAO,iBAAgB,EAAE;UAC/E,IAAI,EAAEtB,IAAI,CAACkC,EAAE;UACb,UAAU,EAAElC,IAAI,CAACC,QAAQ;UACzB,YAAY,EAAED,IAAI,CAACI,UAAU;UAC7B,UAAU,EAAEJ,IAAI,CAACK,QAAQ;UACzB,UAAU,EAAEL,IAAI,CAACM,QAAQ;UACzB,MAAM,EAAEN,IAAI,CAACO,IAAI;UACjB,UAAU,EAAEP,IAAI,CAACQ;QACnB,CAAC,CAAC;QACF,IAAIU,QAAQ,CAACK,MAAK,KAAM,GAAG,EAAE;UAC3BY,KAAK,CAAC,sBAAsB;UAC5B,IAAI,CAAC1C,UAAU,CAACqC,KAAK,CAAC,CAACC,QAAO,GAAI,KAAK;UACvC,IAAI,CAACtC,UAAU,CAACqC,KAAK,CAAC,CAACH,cAAa,GAAI,KAAK,EAAE;UAC/C,IAAI,CAACjB,QAAQ,CAAC,CAAC;QACjB;MACF,EAAE,OAAOkB,KAAK,EAAE;QACdJ,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACD,MAAMQ,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMC,MAAK,GAAI,IAAI,CAACzC,UAAU,CAACsC,EAAC;QAChC,MAAMhB,QAAO,GAAI,MAAM5B,KAAK,CAACgD,MAAM,CAAE,GAAE,IAAI,CAAClB,MAAM,CAACC,OAAO,CAACC,MAAO,qBAAoBe,MAAO,EAAC;QAC9F,IAAInB,QAAQ,CAACK,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAI,CAAC7B,YAAW,GAAI,KAAK;UACzB;UACA,IAAI,CAACgB,QAAQ,CAAC;QAChB;MACF,EAAE,OAAOkB,KAAK,EAAE;QACdO,KAAK,CAACP,KAAK;QACXJ,OAAO,CAACI,KAAK,CAACA,KAAK;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}