{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      teachers: [],\n      searchText: '',\n      bookid: null,\n      teacherid: null,\n      snackbar: false,\n      color: '#E8F5E9',\n      timeout: 3000,\n      message: ''\n    };\n  },\n  computed: {\n    filteredTeachers() {\n      if (this.searchText !== '') {\n        return this.teachers.filter(teacher => teacher.teacherName.toLowerCase().includes(this.searchText.toLowerCase()) || teacher.class.toLowerCase().includes(this.searchText.toLowerCase()) || teacher.subject.toLowerCase().includes(this.searchText.toLowerCase()) || teacher.bookName.toLowerCase().includes(this.searchText.toLowerCase()));\n      } else return this.teachers;\n    }\n  },\n  mounted() {\n    this.getissuedbooks();\n  },\n  methods: {\n    async issueBook() {\n      try {\n        const response = await axios.post(`${this.$store.getters.getUrl}/issues/issue-book?bookId=${this.bookid}&userId=${this.teacherid}`, {\n          \"bookId\": this.bookid,\n          \"userId\": this.teacherid\n        });\n        if (response.status === 200) {\n          // alert('Successfully issued');\n          this.message = 'Book Issued Successfully !!';\n          this.color = 'green';\n          this.clearForm();\n          this.snackbar = true;\n          this.getissuedbooks();\n        }\n      } catch (error) {\n        this.message = error.response.data + '!!';\n        this.color = 'red';\n        this.snackbar = true;\n        console.error(error);\n        // alert(error.response.data)\n      }\n    },\n    clearForm() {\n      this.teacherid = '';\n      this.bookid = '';\n    },\n    async getissuedbooks() {\n      try {\n        const response = await axios.get(`${this.$store.getters.getUrl}/issues/allissuedbooks`);\n        if (response.status === 200) {\n          this.teachers = response.data;\n          console.log(response.data);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async returnBook(index) {\n      try {\n        const bookid = this.filteredTeachers[index].bookId;\n        console.log(bookid);\n        console.log(typeof bookid);\n        const teacherid = this.filteredTeachers[index].teacherId;\n        const response = await axios.post(`${this.$store.getters.getUrl}/return/return-book?bookId=${bookid}&userId=${teacherid}`, {\n          \"bookId\": this.bookid,\n          \"userId\": this.teacherid\n        });\n        if (response.status === 200) {\n          alert('Returned Successfully');\n          this.getissuedbooks();\n        }\n      } catch (error) {\n        console.error(error);\n        alert(error);\n      }\n    },\n    search() {\n      // Function to handle search\n      // Since we are using v-model, searchText is automatically updated\n    }\n  }\n};","map":{"version":3,"names":["axios","data","teachers","searchText","bookid","teacherid","snackbar","color","timeout","message","computed","filteredTeachers","filter","teacher","teacherName","toLowerCase","includes","class","subject","bookName","mounted","getissuedbooks","methods","issueBook","response","post","$store","getters","getUrl","status","clearForm","error","console","get","log","returnBook","index","bookId","teacherId","alert","search"],"sources":["C:\\Users\\LENOVO\\Documents\\practice\\siya\\newlibrary-main\\newlibrary-main\\src\\components\\IssueBook.vue"],"sourcesContent":["<template>\r\n  <v-main>\r\n    <v-container class=\"py-8 px-6\" fluid>\r\n  <v-snackbar v-model=\"snackbar\" :color=\"color\" :timeout=\"timeout\" location=\"bottom\">\r\n      <div class=\"text-center\">{{ message }}</div>\r\n    </v-snackbar>\r\n    <!-- <h1 class=\"thr\">Issued Book List</h1> -->\r\n      <div class=\"search-bar ms-5\">\r\n        <div class=\"search\">\r\n          <div class=\"search-bar\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-search icon\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0\"/>\r\n            </svg>\r\n            <input v-model=\"searchText\" type=\"text\" placeholder=\"Search\" @input=\"search\" />\r\n          </div>\r\n        </div>\r\n        <input type=\"text\" v-model=\"searchText\" placeholder=\"Search by Name, Class, or Subject\">\r\n        <i class=\"fa fa-search\" aria-hidden=\"true\"></i> \r\n      </div>\r\n      <div class=\"additional-inputs ms-5\">\r\n        <th>Teachers ID</th> <input type=\"text\" placeholder=\"Teachers Id\" v-model=\"teacherid\">\r\n        <th>Issued Book ID</th>\r\n        <input type=\"text\" placeholder=\"Issued Book Id\" v-model=\"bookid\">\r\n        <button @click=\"issueBook\" style=\"background-color: #4397a0;\">Issue Book</button>\r\n      </div>\r\n      <table class=\"ms-5 mt-5\">\r\n        <thead>\r\n          <tr>\r\n          <th>SlNo.</th>\r\n            <!-- <th>ID</th> -->\r\n            <th>Name</th>\r\n            <th>Class</th>\r\n            <th>Subject</th>\r\n            <th>BookName</th>\r\n            <th>IssuedDate</th>\r\n            <th>ReturnDate</th>\r\n            <th>Action</th>\r\n            <!-- <th>Edit/Delete</th> -->\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"(teacher, index) in filteredTeachers\" :key=\"index\">\r\n            <td>{{ index+1 }} {{ teacher.userId }}</td>\r\n            <!-- <td>{{ teacher.id }}</td> -->\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.teacherName\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.class\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.subject\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.bookName\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.issueDate\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <input type=\"text\" v-model=\"teacher.returnDate\" :disabled=\"!teacher.editMode\">\r\n            </td>\r\n            <td>\r\n              <button class=\"btn\" style=\"background-color: #4397a0;\" @click=\"returnBook(index)\">Return</button>\r\n            </td>\r\n            <!-- <td>\r\n              <button v-if=\"!teacher.editMode\" @click=\"toggleEditMode(index)\">Edit/</button>\r\n              <button v-else @click=\"submitEdit(index)\">Submit</button>\r\n              <button @click=\"deleteTeacher(index)\">Delete</button>\r\n\r\n            </td> -->\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </v-container>\r\n    </v-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  data() {\r\n    return {\r\n      teachers: [],\r\n      searchText: '',\r\n      bookid: null,\r\n      teacherid: null,\r\n      snackbar: false,\r\n      color: '#E8F5E9',\r\n      timeout: 3000,\r\n      message: '',\r\n    };\r\n  },\r\n  computed: {\r\n    filteredTeachers() {\r\n      if(this.searchText !== '')\r\n      {\r\n        return this.teachers.filter(teacher =>\r\n        teacher.teacherName.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n        teacher.class.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n        teacher.subject.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n        teacher.bookName.toLowerCase().includes(this.searchText.toLowerCase()) \r\n      );\r\n      } else\r\n      return this.teachers; \r\n    }\r\n  },\r\n  mounted(){\r\nthis.getissuedbooks()\r\n  },\r\n  methods: {\r\n    async issueBook() {\r\n    try {\r\n        const response = await axios.post(`${this.$store.getters.getUrl}/issues/issue-book?bookId=${this.bookid}&userId=${this.teacherid}`, {\r\n            \"bookId\": this.bookid,\r\n            \"userId\": this.teacherid \r\n        });\r\n        if (response.status === 200) {\r\n            // alert('Successfully issued');\r\n            this.message = 'Book Issued Successfully !!';\r\n            this.color = 'green';\r\n            this.clearForm();\r\n            this.snackbar = true;\r\n            this.getissuedbooks()\r\n        }\r\n    } catch (error) {\r\n        this.message = error.response.data + '!!';\r\n        this.color = 'red';\r\n        this.snackbar = true;\r\n        console.error(error);\r\n        // alert(error.response.data)\r\n    }\r\n},\r\nclearForm() {\r\n      this.teacherid = '';\r\n      this.bookid = '';\r\n    },\r\n   async getissuedbooks(){\r\ntry{\r\n  const response = await axios.get(`${this.$store.getters.getUrl}/issues/allissuedbooks`)\r\n  if(response.status===200){\r\n    this.teachers = response.data\r\n    console.log(response.data)\r\n  }                                                                                             \r\n}\r\ncatch(error){\r\n  console.error(error)\r\n}\r\n   },\r\n   async returnBook(index) {\r\n    try {\r\n        const bookid=this.filteredTeachers[index].bookId\r\n        console.log(bookid);\r\n        console.log(typeof(bookid));\r\n        const teacherid=this.filteredTeachers[index].teacherId\r\n        const response = await axios.post(`${this.$store.getters.getUrl}/return/return-book?bookId=${bookid}&userId=${teacherid}`, {\r\n          \"bookId\": this.bookid,\r\n          \"userId\": this.teacherid \r\n        });\r\n        if (response.status === 200) {\r\n            alert('Returned Successfully');\r\n            this.getissuedbooks()\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert(error)\r\n    }\r\n},\r\n    search() {\r\n      // Function to handle search\r\n      // Since we are using v-model, searchText is automatically updated\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  /* Your existing CSS styles */\r\n  table {\r\n    width: 96%;\r\n    border-collapse: collapse;\r\n  }\r\n  \r\n  th, td {\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n  }\r\n  \r\n  th {\r\n    background-color: #f2f2f2;\r\n  }\r\n  \r\n  tbody tr:nth-child(even) {\r\n    background-color: #f2f2f2;\r\n  }\r\n  \r\n  table input[type=\"text\"] {\r\n    border: none; /* Remove the border */\r\n    outline: none; /* Remove the outline box */\r\n    width: 100%; /* Expand the input field to fill the available space */\r\n    padding: 4px; /* Add some padding to the input field */\r\n    box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n  }\r\n  \r\n  .thr {\r\n    text-align: center;\r\n    margin-top: 10px;\r\n    margin-bottom: 2px;\r\n    padding: 8px;\r\n  }\r\n  \r\n  /* Remove the box around buttons */\r\n  table button {\r\n    border: none;\r\n    /* background: none; */\r\n    cursor: pointer;\r\n    padding: 10;\r\n  }\r\n  .navbar {\r\n    background-color: #f4c807;\r\n    color: #150101;\r\n    padding: 5px 0;\r\n  }\r\n  \r\n  .container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  .navbar-brand {\r\n    font-size: 1.5rem;\r\n    text-decoration: white;\r\n    color: #fff;\r\n  }\r\n  \r\n  .navbar-nav {\r\n    list-style-type: none;\r\n    margin: 0px;\r\n    padding: 0px;\r\n    display: flex;\r\n  }\r\n  \r\n  .nav-item {\r\n    margin-right: 20px;\r\n  }\r\n  \r\n  .nav-link {\r\n    text-decoration:white;\r\n    color: #fff;\r\n  }\r\n  \r\n  .search-bar {\r\n    width: 250px;\r\n    border: none; /* Remove the border */\r\n\r\n  }\r\n  \r\n  .search-bar input[type=\"text\"] {\r\n    border: none; /* Remove border */\r\n    outline: none; /* Remove outline */\r\n    width: 100%; /* Full width */\r\n    padding: 4px; /* Add padding */\r\n    box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n  }\r\n  \r\n  /* Rest of your CSS */\r\n  \r\n  .search-bar {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 250px;\r\n    border: none; /* Remove the border */\r\n    border-bottom: 1px solid black; /* Add bottom border */\r\n  }\r\n  \r\n  .search-bar input[type=\"text\"] {\r\n    border: none; /* Remove border */\r\n    outline: none; /* Remove outline */\r\n    width: calc(100% - 30px); /* Full width minus space for icon */\r\n    padding: 4px; /* Add padding */\r\n    box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n  }\r\n  \r\n  .search-bar i {\r\n    margin-left: 5px; /* Adjust icon spacing */\r\n  }\r\n  \r\n.additional-inputs {\r\n  margin-top: 75px; /* Adjust the margin as needed */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  max-width: 100%; /* Adjust the width as needed */\r\n  /* margin-left: 250px; */\r\n}\r\n\r\n.additional-inputs input[type=\"text\"] {\r\n  width: calc(33.33% - 10px); /* Divide the width equally between inputs with some margin */\r\n  padding: 8px; /* Add padding */\r\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n}\r\n\r\n.additional-inputs button {\r\n  padding: 8px 16px; /* Add padding */\r\n  background-color: #007bff; /* Change button background color */\r\n  color: #fff; /* Change button text color */\r\n  border: none; /* Remove border */\r\n  border-radius: 4px; /* Add border radius */\r\n  cursor: pointer;\r\n}\r\n\r\n.additional-inputs button:hover {\r\n  background-color: #0056b3; /* Change button background color on hover */\r\n}\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}