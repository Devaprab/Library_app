{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      teachers: [],\n      searchText: '',\n      dialogDelete: false,\n      deleteIndex: -1,\n      deleteItem: {}\n    };\n  },\n  computed: {\n    filteredTeachers() {\n      if (this.searchText !== '') {\n        return this.teachers.filter(teacher => teacher.teacherName.toLowerCase().includes(this.searchText.toLowerCase()) || teacher.standard.toLowerCase().includes(this.searchText.toLowerCase()) || teacher.subject.toLowerCase().includes(this.searchText.toLowerCase()));\n      } else {\n        return this.teachers;\n      }\n    }\n  },\n  mounted() {\n    this.getteachers();\n  },\n  methods: {\n    deleteT(item) {\n      this.deleteIndex = this.filteredTeachers.indexOf(item);\n      this.deleteItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n    },\n    toggleEditMode(index) {\n      this.teachers[index].editMode = !this.teachers[index].editMode;\n    },\n    async submitEdit(index) {\n      this.toggleEditMode(index);\n      try {\n        const teacher = this.teachers[index];\n        const response = await axios.put(`${this.$store.getters.getUrl}/api/${teacher.id}`, {\n          \"teacherName\": teacher.teacherName,\n          \"standard\": teacher.standard,\n          \"division\": teacher.division,\n          \"subject\": teacher.subject\n        });\n        if (response.status >= 200 || response.status < 300) {\n          alert('successfully updated');\n          this.teachers[index].editable = false;\n          this.getteachers();\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async deleteTeacher() {\n      // this.dialogDelete = true;\n      try {\n        const teacherid = this.deleteItem.id;\n        const response = await axios.delete(`${this.$store.getters.getUrl}/api/${teacherid}`, {});\n        if (response.status >= 200 || response.status < 300) {\n          this.dialogDelete = false;\n          // alert('successfully deleted')\n          this.getteachers();\n        } else if (response.status === 500) {\n          const errorMessage = 'Book is not returned. Please return the book and delete again ';\n          throw new Error(errorMessage);\n        }\n      } catch (error) {\n        // alert(error)\n        this.dialogDelete = false;\n        alert('Book is not returned. Please return the book and delete again ');\n        console.error(error);\n      }\n    },\n    async getteachers() {\n      try {\n        const response = await axios.get(`${this.$store.getters.getUrl}/api/allTeachers`);\n        if (response.status >= 200 || response.status < 300) {\n          const teachers = response.data.filter(res => res.role !== 'ADMIN');\n          this.teachers = teachers.map(teacher => ({\n            ...teacher,\n            editMode: false // Initialize editMode property for each teacher\n          }));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","teachers","searchText","dialogDelete","deleteIndex","deleteItem","computed","filteredTeachers","filter","teacher","teacherName","toLowerCase","includes","standard","subject","mounted","getteachers","methods","deleteT","item","indexOf","Object","assign","closeDelete","toggleEditMode","index","editMode","submitEdit","response","put","$store","getters","getUrl","id","division","status","alert","editable","error","console","deleteTeacher","teacherid","delete","errorMessage","Error","get","res","role","map"],"sources":["C:\\Users\\LENOVO\\Documents\\practice\\siya\\newlibrary-main\\newlibrary-main\\src\\components\\TeacherList.vue"],"sourcesContent":["<template>\r\n  <v-main>\r\n    <v-container class=\"py-8 px-6\" fluid>\r\n  <!-- <h1 class=\"thr\">Teachers List</h1> -->\r\n  <div class=\"search-bar ms-3\">\r\n    <div class=\"search\">\r\n      <div class=\"search-bar\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-search icon\" viewBox=\"0 0 16 16\">\r\n          <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0\"/>\r\n        </svg>\r\n        <input v-model=\"searchText\" type=\"text\" placeholder=\"Search\" @input=\"search\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div style=\"margin-left: 15px; margin-right: 20px;\" class=\"mt-5\">\r\n    <v-table class=\"table\" height=\"300px\" fixed-header>\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Name</th>\r\n          <th>Email</th>\r\n          <th>Class</th>\r\n          <th>Division</th>\r\n          <th>Subject</th>\r\n          <th>Edit</th>\r\n          <th>Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(teacher, index) in filteredTeachers\" :key=\"index\" :class=\"{ 'edit-mode': teacher.editMode }\">\r\n        \r\n          <td>{{ teacher.id }}</td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"teacher.teacherName\" :disabled=\"!teacher.editMode\">\r\n          </td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"teacher.email\" :disabled=\"!teacher.editMode\">\r\n          </td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"teacher.standard\" :disabled=\"!teacher.editMode\">\r\n          </td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"teacher.division\" :disabled=\"!teacher.editMode\">\r\n          </td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"teacher.subject\" :disabled=\"!teacher.editMode\">\r\n          </td>\r\n          <td>\r\n            <button v-if=\"!teacher.editMode\" @click=\"toggleEditMode(index)\"><v-icon>mdi-pencil</v-icon></button>\r\n            <button v-else @click=\"submitEdit(index)\">Submit</button>\r\n          </td>\r\n          <td>\r\n            <button @click=\"deleteT(teacher)\"><v-icon style=\"color: red;\">mdi-delete</v-icon></button>\r\n            <v-dialog v-model=\"dialogDelete\" width=\"400px\">\r\n                        <v-card class=\" pb-4\" style=\"border-top:25px solid #FFCDD2\">\r\n                            <v-icon color=\"red-accent-4\" size=\"54\"\r\n                                class=\"align-self-center mt-2\">mdi-alert-outline</v-icon>\r\n                            <v-card-title class=\"mb-2 text-center fs-4\">Delete\r\n                                Teacher?</v-card-title>\r\n                            <v-card-text class=\"text-center\">Are you sure you want to delete \r\n                                {{ deleteItem.teacherName }}?</v-card-text>\r\n                            <v-card-actions class=\"d-flex justify-content-center \">\r\n\r\n                                <v-btn color=\"#B71C1C\" variant=\"tonal\" @click=\"deleteTeacher()\">Delete</v-btn>\r\n                                <v-btn color=\"#424242\" variant=\"tonal\" @click=\"closeDelete\">Cancel</v-btn>\r\n                            </v-card-actions>\r\n                        </v-card>\r\n                    </v-dialog> \r\n          </td>\r\n      \r\n        </tr>\r\n      </tbody>\r\n    </v-table>\r\n  </div>\r\n  </v-container>\r\n  </v-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  data() {\r\n    return {\r\n      teachers: [],\r\n      searchText: '',\r\n      dialogDelete: false,\r\n      deleteIndex: -1,\r\n      deleteItem: {},\r\n    };\r\n  },\r\n  computed: {\r\n    filteredTeachers() {\r\n      if (this.searchText !== '') {\r\n        return this.teachers.filter(teacher =>\r\n          teacher.teacherName.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          teacher.standard.toLowerCase().includes(this.searchText.toLowerCase()) ||\r\n          teacher.subject.toLowerCase().includes(this.searchText.toLowerCase())\r\n        );\r\n      } else {\r\n        return this.teachers;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getteachers();\r\n  },\r\n  methods: {\r\n  deleteT(item) {\r\n    this.deleteIndex = this.filteredTeachers.indexOf(item);\r\n    this.deleteItem = Object.assign({},item);\r\n    this.dialogDelete = true;\r\n  },\r\n  closeDelete(){\r\n      this.dialogDelete = false;\r\n    },\r\n    toggleEditMode(index) {\r\n      this.teachers[index].editMode = !this.teachers[index].editMode;\r\n    },\r\n    async submitEdit(index) {\r\n      this.toggleEditMode(index);\r\n      try {\r\n        const teacher = this.teachers[index];\r\n\r\n        const response = await axios.put(`${this.$store.getters.getUrl}/api/${teacher.id}`, {\r\n\r\n          \"teacherName\": teacher.teacherName,\r\n          \"standard\": teacher.standard,\r\n          \"division\": teacher.division,\r\n          \"subject\": teacher.subject,\r\n        });\r\n        if (response.status >= 200 || response.status < 300) {\r\n          alert('successfully updated')\r\n          this.teachers[index].editable = false;\r\n          this.getteachers();\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n\r\n    },\r\n    async deleteTeacher() {\r\n      // this.dialogDelete = true;\r\n      try {\r\n        const teacherid = this.deleteItem.id\r\n        const response = await axios.delete(`${this.$store.getters.getUrl}/api/${teacherid}`, {})\r\n        if (response.status >= 200 || response.status < 300) {\r\n          this.dialogDelete = false;\r\n          // alert('successfully deleted')\r\n          this.getteachers()\r\n        } else if(response.status === 500) {\r\n          const errorMessage = 'Book is not returned. Please return the book and delete again ';\r\n          \r\n      throw new Error(errorMessage);\r\n        }\r\n      } catch (error) {\r\n        // alert(error)\r\n        this.dialogDelete = false;\r\n        alert('Book is not returned. Please return the book and delete again ');\r\n        console.error(error)\r\n      }\r\n    },\r\n    async getteachers() {\r\n      try {\r\n        const response = await axios.get(`${this.$store.getters.getUrl}/api/allTeachers`)\r\n        if (response.status >= 200 || response.status < 300) {\r\n          const teachers = response.data.filter(res => res.role !== 'ADMIN');          \r\n          this.teachers = teachers.map(teacher => ({\r\n            ...teacher,\r\n            editMode: false // Initialize editMode property for each teacher\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Your existing CSS styles */\r\n.table {\r\n  /* width: 70%; */\r\n  border-collapse: collapse;\r\n  /* margin-top: 100px;\r\n  margin-left: 250px; */\r\n}\r\n\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  /* padding: 8px; */\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n}\r\n\r\ntable input[type=\"text\"] {\r\n  border: none; /* Remove the border */\r\n  outline: none; /* Remove the outline box */\r\n  width: 100%; /* Expand the input field to fill the available space */\r\n  padding: 4px; /* Add some padding to the input field */\r\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n}\r\n\r\n.thr {\r\n  text-align: center;\r\n  /* margin-top: 10px;\r\n  margin-bottom: 2px; */\r\n  /* padding: 8px; */\r\n}\r\n\r\n/* Remove the box around buttons */\r\ntable button {\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  padding: 0;\r\n}\r\n\r\n.search-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 250px;\r\n  border: none; /* Remove the border */\r\n  border-bottom: 1px solid black; /* Add bottom border */\r\n}\r\n\r\n.search-bar input[type=\"text\"] {\r\n  border: none; /* Remove border */\r\n  outline: none; /* Remove outline */\r\n  width: calc(100% - 30px); /* Full width minus space for icon */\r\n  padding: 4px; /* Add padding */\r\n  box-sizing: border-box; /* Include padding and border in the element's total width and height */\r\n}\r\n\r\n.search-bar i {\r\n  margin-left: 5px; /* Adjust icon spacing */\r\n}\r\n.v-table.v-table--fixed-header > .v-table__wrapper > table > thead > tr > th {\r\n  background: #646c4c;\r\n  color: white;\r\n}\r\n/* Styles for edit mode */\r\n.edit-mode {\r\n  background-color: rgba(0, 0, 0, 0.1); /* Change background color for rows in edit mode */\r\n}\r\n</style> \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}